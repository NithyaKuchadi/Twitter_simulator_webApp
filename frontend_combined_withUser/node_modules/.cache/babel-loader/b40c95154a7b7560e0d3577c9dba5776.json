{"ast":null,"code":"var _jsxFileName = \"/Users/junlanlu/Documents/CMPE 273/Group_Project/Twitter_simulator_webApp/frontend_combined_withUser/src/components/Messages/Messages.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport ComposeMessage from './ComposeMessage';\nimport { getInboxMessages } from '../../redux/actions/message_actions';\nimport { Row } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport '../css/message.css';\n\nclass Messages extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelect = async key => {\n      var email = null;\n      email = localStorage.getItem('cookie2');\n\n      if (key === \"second\") {\n        await this.props.getInboxMessages(email);\n        let array = this.props.msgs.msgs;\n        let arrayLength = array.length;\n        let sent = [];\n\n        for (var i = 0; i < arrayLength; i++) {\n          if (array[i].from === email) {\n            sent.push(array[i]);\n          }\n        }\n\n        this.setState({\n          sentMsgs: sent\n        });\n      }\n\n      if (key === \"first\") {\n        await this.props.getInboxMessages(email);\n        let array = this.props.msgs.msgs;\n        let arrayLength = array.length;\n        let inbox = [];\n\n        for (var i = 0; i < arrayLength; i++) {\n          if (array[i].to === email) {\n            inbox.push(array[i]);\n          }\n        }\n\n        this.setState({\n          inboxMsgs: inbox\n        });\n      }\n    };\n\n    this.state = {\n      sentMsgs: [],\n      inboxMsgs: [],\n      hide_sentMsgs: true,\n      hide_inboxMsgs: false\n    };\n  }\n\n  async componentDidMount() {\n    var email = null;\n    email = localStorage.getItem('cookie2');\n    await this.props.getInboxMessages(email);\n\n    if (this.props.msgs.msgs) {\n      let array = this.props.msgs.msgs;\n      let arrayLength = array.length;\n      let inbox = [];\n      let sent = [];\n\n      for (var i = 0; i < arrayLength; i++) {\n        if (array[i].to === email) {\n          inbox.push(array[i]);\n        }\n\n        if (array[i].from === email) {\n          sent.push(array[i]);\n        }\n      }\n\n      this.setState({\n        inboxMsgs: inbox,\n        sentMsgs: sent\n      });\n    }\n  }\n\n  render() {\n    let redirectVar = null;\n\n    if (!localStorage.getItem('cookie2')) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/TwitterHome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      });\n    }\n\n    let InboxClick = e => {\n      this.setState({\n        hide_sentMsgs: true,\n        hide_inboxMsgs: false\n      });\n    };\n\n    let SentMsgsClick = e => {\n      this.setState({\n        hide_sentMsgs: false,\n        hide_inboxMsgs: true\n      });\n    };\n\n    let inboxDiv = this.state.inboxMsgs.map((record, index) => {\n      let hrefLink = \"#href\" + index;\n      let id = \"href\" + index;\n      let str = record.timestamp; // let time = str.substring(0, str.indexOf('('));\n\n      let time = str.substring(4, 10).concat(',').concat(str.substring(16, 24));\n      return React.createElement(\"div\", {\n        class: \"card1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-6 float-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"displaybold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \" From: \", record.from), time), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-6 float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, record.message), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }))));\n    });\n    let sentboxDiv = this.state.sentMsgs.map((record, index) => {\n      let hrefLink = \"#href\" + index;\n      let id = \"href\" + index;\n      let str = record.timestamp; //let time = str.substring(0, str.indexOf('('));\n\n      let time = str.substring(4, 10).concat(',').concat(str.substring(16, 24)); // +\",\"+substring(16,22);\n\n      return React.createElement(\"div\", {\n        className: \"card1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-6 float-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"displaybold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \" To: \", record.to), time), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-6 float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, record.message), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }))));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, redirectVar, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"navbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navbar-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"navbar-brand\",\n      href: \"/TwitterHome\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        marginLeft: \"28px\"\n      },\n      className: \"h2-id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Messaging\"), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      style: {\n        marginTop: \"10px\",\n        marginLeft: \"30px\"\n      },\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#composeMessage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), \"Message\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(ComposeMessage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"removelist\",\n      style: {\n        marginLeft: \"28px\"\n      },\n      onClick: InboxClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/Message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Inbox\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"removelist\",\n      style: {\n        marginLeft: \"28px\"\n      },\n      onClick: SentMsgsClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/Message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Sent\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, !this.state.hide_inboxMsgs && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Inbox Messages\"), inboxDiv), !this.state.hide_sentMsgs && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Sent Messages\"), sentboxDiv))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  msgs: state.inbox.msgs\n});\n\nexport default connect(mapStateToProps, {\n  getInboxMessages\n})(Messages);","map":{"version":3,"sources":["/Users/junlanlu/Documents/CMPE 273/Group_Project/Twitter_simulator_webApp/frontend_combined_withUser/src/components/Messages/Messages.js"],"names":["React","Component","Redirect","connect","ComposeMessage","getInboxMessages","Row","Link","Messages","constructor","props","handleSelect","key","email","localStorage","getItem","array","msgs","arrayLength","length","sent","i","from","push","setState","sentMsgs","inbox","to","inboxMsgs","state","hide_sentMsgs","hide_inboxMsgs","componentDidMount","render","redirectVar","InboxClick","e","SentMsgsClick","inboxDiv","map","record","index","hrefLink","id","str","timestamp","time","substring","concat","message","sentboxDiv","marginLeft","marginTop","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport ComposeMessage from './ComposeMessage';\nimport { getInboxMessages } from '../../redux/actions/message_actions';\nimport { Row } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport '../css/message.css';\n\nclass Messages extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sentMsgs: [],\n            inboxMsgs: [],\n            hide_sentMsgs: true,\n            hide_inboxMsgs: false\n        }\n    }\n\n    async componentDidMount() {\n        var email = null;\n        email = localStorage.getItem('cookie2');\n        await this.props.getInboxMessages(email);\n        if (this.props.msgs.msgs) {\n            let array = this.props.msgs.msgs;\n            let arrayLength = array.length;\n\n            let inbox = [];\n            let sent = [];\n            for (var i = 0; i < arrayLength; i++) {\n                if (array[i].to === email) {\n                    inbox.push(array[i]);\n                }\n                if (array[i].from === email) {\n                    sent.push(array[i]);\n                }\n            }\n            this.setState({ inboxMsgs: inbox, sentMsgs: sent });\n        }\n\n    }\n\n    handleSelect = async (key) => {\n        var email = null;\n        email = localStorage.getItem('cookie2');\n        if (key === \"second\") {\n            await this.props.getInboxMessages(email);\n            let array = this.props.msgs.msgs;\n            let arrayLength = array.length;\n            let sent = [];\n            for (var i = 0; i < arrayLength; i++) {\n                if (array[i].from === email) {\n                    sent.push(array[i]);\n                }\n            }\n            this.setState({ sentMsgs: sent });\n        }\n        if (key === \"first\") {\n            await this.props.getInboxMessages(email);\n            let array = this.props.msgs.msgs;\n            let arrayLength = array.length;\n            let inbox = [];\n            for (var i = 0; i < arrayLength; i++) {\n                if (array[i].to === email) {\n                    inbox.push(array[i]);\n                }\n            }\n            this.setState({ inboxMsgs: inbox });\n        }\n    }\n\n    render() {\n        let redirectVar = null;\n        if (!localStorage.getItem('cookie2')) {\n            redirectVar = <Redirect to=\"/TwitterHome\" />;\n        }\n        let InboxClick = (e) => {\n            this.setState(\n                {\n                    hide_sentMsgs: true,\n                    hide_inboxMsgs: false\n                }\n            )\n        }\n        let SentMsgsClick = (e) => {\n            this.setState(\n                {\n                    hide_sentMsgs: false,\n                    hide_inboxMsgs: true\n                }\n            )\n        }\n\n        let inboxDiv = this.state.inboxMsgs.map((record, index) => {\n            let hrefLink = \"#href\" + index;\n            let id = \"href\" + index;\n            let str = record.timestamp;\n           // let time = str.substring(0, str.indexOf('('));\n           let time = str.substring(4, 10).concat(',').concat(str.substring(16, 24));\n            return (\n                <div class=\"card1\">\n                    <div class=\"card-header\">\n                        <div className=\"row\">\n                            <br/>\n                            <div className=\"col-sm-6 float-left\">\n                            <div className=\"displaybold\"> From: {record.from}</div>\n                               {time}\n                            </div>\n                            <br />\n                            <div className=\"col-sm-6 float-right\">\n                                {record.message}\n                            </div>\n                            <br />\n                           \n                        </div>\n                    </div>\n                </div>\n            )\n        });\n\n        let sentboxDiv = this.state.sentMsgs.map((record, index) => {\n            let hrefLink = \"#href\" + index;\n            let id = \"href\" + index;\n            let str = record.timestamp;\n            //let time = str.substring(0, str.indexOf('('));\n            let time = str.substring(4, 10).concat(',').concat(str.substring(16, 24));\n            // +\",\"+substring(16,22);\n            return (\n                <div className=\"card1\">\n                    <div className=\"card-header\">\n                        <div className=\"row\">\n                            <br/>\n                            <div className=\"col-sm-6 float-left\">\n                               <div className=\"displaybold\"> To: {record.to}</div>\n                                {time}\n                            </div><br />\n                            <div className=\"col-sm-6 float-right\">\n                                {record.message}\n                            </div>\n                            <br />\n                          \n                        </div>\n                    </div>\n\n                </div>\n            )\n        });\n\n        return (\n            <div>\n                {redirectVar}\n                <div>\n                    <div>\n                        <nav className=\"navbar\">\n                            <div className=\"container-fluid\">\n                                <div className=\"navbar-header\">\n                                    <a className=\"navbar-brand\" href=\"/TwitterHome\"></a>\n                                </div>\n                                <div>\n                                </div>\n                            </div>\n                        </nav>\n                        <div className=\"row\">\n                            \n                            <div className=\"col-sm-3\">\n                                <h3 style={{  marginLeft:\"28px\" }}className=\"h2-id\">Messaging</h3>\n\n                                <Row>\n                                    <button className=\"btn btn-primary\" style={{ marginTop: \"10px\", marginLeft:\"30px\" }} data-toggle=\"modal\" data-target=\"#composeMessage\">\n                                        <i className=\"fa fa-plus\" aria-hidden=\"true\">\n                                        </i>Message</button><br /><br />\n                                    <ComposeMessage />\n                                </Row><br/>\n                                <li className=\"removelist\" style={{  marginLeft:\"28px\" }} onClick={InboxClick} ><Link to=\"/Message\">Inbox</Link></li><br />\n                                <li className=\"removelist\" style={{  marginLeft:\"28px\" }} onClick={SentMsgsClick} ><Link to=\"/Message\">Sent</Link></li><br />\n\n                            </div>\n                            <div className=\"col-sm-9\">\n                                {!this.state.hide_inboxMsgs && <div>\n                                    <h3>Inbox Messages</h3>\n                                    {inboxDiv}\n                                </div>}\n                                {!this.state.hide_sentMsgs && <div >\n                                    <h3>Sent Messages</h3>\n                                    {sentboxDiv}\n                                </div>}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    msgs: state.inbox.msgs\n});\n\nexport default connect(mapStateToProps, { getInboxMessages })(Messages);"]},"metadata":{},"sourceType":"module"}