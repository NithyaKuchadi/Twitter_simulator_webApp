{"ast":null,"code":"var _jsxFileName = \"/Users/junlanlu/Documents/CMPE 273/Group_Project/Twitter_simulator_webApp/frontend_combined_withUser/src/components/Profile.js\";\nimport React, { Component } from 'react';\nimport { profileaction, updateProfile } from '../redux/actions/profile';\nimport { connect } from 'react-redux';\nimport './css/profile.css';\nimport { Modal, Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { imageDownload, imageUpload } from '../redux/actions/image_actions';\nimport { Redirect } from 'react-router';\n\nclass Profile extends Component {\n  constructor() {\n    super();\n\n    this.onValidate = e => {\n      const validZipcode = RegExp(\"^[0-9]{5}(?:-[0-9]{4})?$\");\n      const validDate = RegExp(\"([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\");\n      console.log(\"the zipcode is \", this.state.zipcode, validZipcode.test(this.state.zipcode));\n\n      if (this.state.zipcode && !validZipcode.test(this.state.zipcode)) {\n        this.setState({\n          IncorrectCredentials: \"Invalid Zipcode. Valid Zipcodes should be like 90086-1929 or 90086\"\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.updatesProfile = async e => {\n      let isValid = this.onValidate();\n\n      if (isValid) {\n        var data = {};\n        let userid = this.props.userid;\n\n        if (this.state.ProfileImage) {\n          axios.defaults.withCredentials = true;\n          data = {\n            userID: userid,\n            userhandle: \"@\" + this.state.username,\n            username: this.state.username,\n            Bio: this.state.Bio,\n            Website: this.state.Website,\n            dateofbirth: this.state.dateofbirth,\n            ProfileImage: this.state.ProfileImage.imageUrl,\n            city: this.state.city,\n            state: this.state.state,\n            zipcode: this.state.zipcode\n          };\n        } else {\n          axios.defaults.withCredentials = true;\n          data = {\n            userID: userid,\n            userhandle: \"@\" + this.state.username,\n            username: this.state.username,\n            Bio: this.state.Bio,\n            Website: this.state.Website,\n            dateofbirth: this.state.dateofbirth,\n            city: this.state.city,\n            state: this.state.state,\n            zipcode: this.state.zipcode\n          };\n        }\n\n        this.setState({\n          show: false\n        });\n        await this.props.updateProfile(data);\n\n        if (this.props.profiledetails) {\n          this.setState({\n            userdetails: this.props.profiledetails\n          });\n        }\n      }\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        \"show\": false\n      });\n    };\n\n    this.profileedit = () => {\n      this.setState({\n        \"show\": true\n      });\n    };\n\n    this.handleChange = async e => {\n      if (e.target.name === \"ProfileImage\") {\n        if (e.target.files[0]) {\n          console.log(\"IT IS CUMNG INSIDE PROFILE PIC CHANGE\", e.target.files[0]);\n          var profilePhoto = e.target.files[0];\n          var data = new FormData();\n          data.append('image', profilePhoto);\n          await this.props.imageUpload(data);\n          this.setState({\n            ProfileImage: this.props.imageupload_url\n          });\n          await this.props.imageDownload(this.props.imageupload_url);\n          this.setState({\n            ProfileImagePreview: this.props.imagePreviewresponse\n          });\n        }\n      } else {\n        e.preventDefault();\n        const target = e.target;\n        const name = target.name;\n        const value = target.value;\n        console.log(\"value change is \", target.value);\n        this.setState({\n          [name]: value\n        });\n      }\n    };\n\n    this.state = {\n      show: false,\n      userdetails: {},\n      profilename: \"\",\n      userhandle: \"\",\n      Bio: \"\",\n      Website: \"\",\n      dateofbirth: \"\",\n      ProfileImage: \"\",\n      ProfileImagePreview: \"\",\n      created_at: \"\",\n      Followers: 2,\n      Following: 3,\n      firstname: \"\",\n      lastname: \"\",\n      city: \"\",\n      state: \"\",\n      zipcode: \"\",\n      username: \"\",\n      IncorrectCredentials: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    let post = {\n      \"userid\": this.props.userid\n    };\n    await this.props.profileaction(post);\n\n    if (this.props.profiledetails) {\n      let date = this.props.profiledetails.dateofbirth;\n\n      if (date) {\n        date = date.substring(0, 10);\n      }\n\n      let joineddate = this.props.profiledetails.created_at;\n\n      if (joineddate) {\n        joineddate = joineddate.substring(0, 10);\n      }\n\n      this.setState({\n        userdetails: this.props.profiledetails,\n        userhandle: this.props.profiledetails.userhandle,\n        profilename: this.props.profiledetails.profilename,\n        Bio: this.props.profiledetails.description,\n        Website: this.props.profiledetails.website_url,\n        dateofbirth: date,\n        ProfileImage: this.props.profiledetails.profileimage_url,\n        created_at: joineddate,\n        firstname: this.props.profiledetails.firstname,\n        lastname: this.props.profiledetails.lastname,\n        city: this.props.profiledetails.city,\n        state: this.props.profiledetails.state,\n        zipcode: this.props.profiledetails.zipcode,\n        username: this.props.profiledetails.username\n      });\n      let imageUrl = {\n        imageUrl: this.props.profiledetails.profileimage_url\n      };\n\n      if (this.props.profiledetails.profileimage_url !== null) {\n        await this.props.imageDownload(imageUrl);\n        this.setState({\n          ProfileImagePreview: this.props.imagePreviewresponse\n        });\n      }\n    }\n  }\n\n  render() {\n    let redirectVar = null;\n\n    if (!localStorage.getItem('cookie2')) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/TwitterHome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      });\n    }\n\n    let profileImageData = React.createElement(\"img\", {\n      className: \"img-style\",\n      src: \"https://img.freepik.com/free-icon/user-filled-person-shape_318-74922.jpg?size=338c&ext=jpg\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    });\n\n    if (this.state.ProfileImagePreview) {\n      profileImageData = React.createElement(\"img\", {\n        className: \"img-style\",\n        src: this.state.ProfileImagePreview,\n        alt: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, redirectVar, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"jumbotron345\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, profileImageData, React.createElement(\"div\", {\n      className: \"jumbo2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"para34\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"para2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, this.state.userdetails.profilename), React.createElement(\"button\", {\n      onClick: this.profileedit,\n      className: \"para6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Edit Profile\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"para3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, this.state.userdetails.userhandle), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"in\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"First Name\"), \"  \", this.state.userdetails.firstname, \" \"), React.createElement(\"p\", {\n      className: \"parafirstlastname6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Last Name\"), \"   \", this.state.userdetails.lastname)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Born \"), \"           \", this.state.dateofbirth), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Joined \"), \"         \", this.state.created_at), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, this.state.Followers, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Followers\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.state.Following, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Following\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"City\"), \"           \", this.state.userdetails.city), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"State\"), \"           \", this.state.userdetails.state, \" \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"parafirstlastname2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Zipcode\"), \"         \", this.state.userdetails.zipcode, \" \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      className: \"setModal\",\n      show: this.state.show,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      className: \"item2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Edit Profile\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"User Name\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"username\",\n      type: \"text\",\n      defaultValue: this.state.userdetails.username,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Profile Image\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"ProfileImage\",\n      onChange: this.handleChange,\n      type: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Bio\"), React.createElement(\"input\", {\n      className: \"name34567\",\n      type: \"text\",\n      defaultValue: this.state.userdetails.description,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"Website\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"Website\",\n      defaultValue: this.state.userdetails.website_url,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Birth date\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"dateofbirth\",\n      defaultValue: this.state.dateofbirth,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"City\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"city\",\n      defaultValue: this.state.userdetails.city,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"State\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"state\",\n      defaultValue: this.state.userdetails.state,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"field1234567\",\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, this.state.IncorrectCredentials), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Zipcode\"), React.createElement(\"input\", {\n      className: \"name1\",\n      name: \"zipcode\",\n      defaultValue: this.state.userdetails.zipcode,\n      onChange: this.handleChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    })), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"Close\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.updatesProfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"Save Changes\"))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    profiledetails: state.profile.profiledetails,\n    imagePreviewresponse: state.image.imagePreviewresponse,\n    imageupload_url: state.image.imageupload_url\n  };\n};\n\nexport default connect(mapStateToProps, {\n  profileaction,\n  updateProfile,\n  imageDownload,\n  imageUpload\n})(Profile);","map":{"version":3,"sources":["/Users/junlanlu/Documents/CMPE 273/Group_Project/Twitter_simulator_webApp/frontend_combined_withUser/src/components/Profile.js"],"names":["React","Component","profileaction","updateProfile","connect","Modal","Button","axios","imageDownload","imageUpload","Redirect","Profile","constructor","onValidate","e","validZipcode","RegExp","validDate","console","log","state","zipcode","test","setState","IncorrectCredentials","updatesProfile","isValid","data","userid","props","ProfileImage","defaults","withCredentials","userID","userhandle","username","Bio","Website","dateofbirth","imageUrl","city","show","profiledetails","userdetails","handleClose","profileedit","handleChange","target","name","files","profilePhoto","FormData","append","imageupload_url","ProfileImagePreview","imagePreviewresponse","preventDefault","value","profilename","created_at","Followers","Following","firstname","lastname","componentDidMount","post","date","substring","joineddate","description","website_url","profileimage_url","render","redirectVar","localStorage","getItem","profileImageData","color","mapStateToProps","profile","image"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { profileaction, updateProfile } from '../redux/actions/profile';\nimport { connect } from 'react-redux';\nimport './css/profile.css';\nimport { Modal, Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { imageDownload, imageUpload } from '../redux/actions/image_actions';\nimport { Redirect } from 'react-router';\n\nclass Profile extends Component {\n    constructor() {\n        super();\n        this.state = {\n            show: false,\n            userdetails: {},\n            profilename: \"\",\n            userhandle: \"\",\n            Bio: \"\",\n           \n            Website: \"\",\n            dateofbirth: \"\",\n            ProfileImage: \"\",\n            ProfileImagePreview: \"\",\n            created_at: \"\",\n            Followers: 2,\n            Following: 3,\n            firstname: \"\",\n            lastname: \"\",\n            city: \"\",\n            state: \"\",\n            zipcode: \"\",\n            username: \"\",\n            IncorrectCredentials:\"\"\n        }\n\n    }\n    async componentDidMount() {\n\n        let post =\n        {\n            \"userid\": this.props.userid\n        }\n        await this.props.profileaction(post);\n        if (this.props.profiledetails) {\n\n            let date = this.props.profiledetails.dateofbirth;\n            if (date) {\n                date = date.substring(0, 10);\n            }\n            let joineddate = this.props.profiledetails.created_at;\n            if (joineddate) {\n                joineddate = joineddate.substring(0, 10);\n            }\n            this.setState({\n                userdetails: this.props.profiledetails,\n                userhandle: this.props.profiledetails.userhandle,\n                profilename: this.props.profiledetails.profilename,\n                Bio: this.props.profiledetails.description,\n                \n                Website: this.props.profiledetails.website_url,\n                dateofbirth: date,\n                ProfileImage: this.props.profiledetails.profileimage_url,\n                created_at: joineddate,\n                firstname: this.props.profiledetails.firstname,\n                lastname: this.props.profiledetails.lastname,\n                city: this.props.profiledetails.city,\n                state: this.props.profiledetails.state,\n                zipcode: this.props.profiledetails.zipcode,\n                username: this.props.profiledetails.username\n\n            });\n\n            let imageUrl = {\n                imageUrl: this.props.profiledetails.profileimage_url\n            }\n            if (this.props.profiledetails.profileimage_url !== null) {\n                await this.props.imageDownload(imageUrl);\n                this.setState({\n                    ProfileImagePreview: this.props.imagePreviewresponse\n                })\n            }\n\n        }\n\n    }\n    onValidate = (e) => {\n\n        const validZipcode = RegExp(\"^[0-9]{5}(?:-[0-9]{4})?$\");\n\n        const validDate=RegExp(\"([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))\");\n        console.log(\"the zipcode is \",this.state.zipcode ,validZipcode.test(this.state.zipcode ));\n        if (this.state.zipcode && !validZipcode.test(this.state.zipcode )) {\n            this.setState(\n                {\n                    IncorrectCredentials: \"Invalid Zipcode. Valid Zipcodes should be like 90086-1929 or 90086\"\n                }\n            )\n            return false;\n        }\n\n        return true;\n\n    }\n    updatesProfile = async (e) => {\n\n        let isValid = this.onValidate();\n        if (isValid) {\n            var data = {};\n            let userid = this.props.userid;\n         \n            if (this.state.ProfileImage) {\n                axios.defaults.withCredentials = true;\n                data = {\n                    userID: userid,\n                    userhandle: \"@\" + this.state.username,\n                    username: this.state.username,\n                    Bio: this.state.Bio,\n                   \n                    Website: this.state.Website,\n                    dateofbirth: this.state.dateofbirth,\n                    ProfileImage: this.state.ProfileImage.imageUrl,\n                    city: this.state.city,\n                    state: this.state.state,\n                    zipcode: this.state.zipcode\n\n                }\n            }\n            else {\n                axios.defaults.withCredentials = true;\n                data = {\n                    userID: userid,\n                    userhandle: \"@\" + this.state.username,\n                    username: this.state.username,\n                    Bio: this.state.Bio,\n                   \n                    Website: this.state.Website,\n                    dateofbirth: this.state.dateofbirth,\n                    city: this.state.city,\n                    state: this.state.state,\n                    zipcode: this.state.zipcode\n\n                }\n            }\n            this.setState(\n                {\n                    show: false\n                }\n            )\n            await this.props.updateProfile(data);\n            if (this.props.profiledetails) {\n                this.setState({\n                    userdetails: this.props.profiledetails,\n\n\n                });\n            }\n        }\n\n    }\n    handleClose = () => {\n        this.setState(\n            {\n                \"show\": false\n            }\n        )\n    }\n\n    profileedit = () => {\n        this.setState(\n            {\n                \"show\": true\n            }\n        )\n    }\n    handleChange = async (e) => {\n        if (e.target.name === \"ProfileImage\") {\n            if (e.target.files[0]) {\n                console.log(\"IT IS CUMNG INSIDE PROFILE PIC CHANGE\", e.target.files[0]);\n                var profilePhoto = e.target.files[0];\n                var data = new FormData();\n                data.append('image', profilePhoto);\n                await this.props.imageUpload(data);\n\n                this.setState(\n                    {\n                        ProfileImage: this.props.imageupload_url\n                    }\n                )\n                await this.props.imageDownload(this.props.imageupload_url);\n                this.setState({\n                    ProfileImagePreview: this.props.imagePreviewresponse\n\n                })\n            }\n\n\n        }\n        else {\n            e.preventDefault();\n\n            const target = e.target;\n            const name = target.name;\n            const value = target.value;\n            console.log(\"value change is \", target.value);\n            this.setState({\n                [name]: value\n            });\n        }\n\n    }\n    render() {\n\n        let redirectVar = null;\n        if (!localStorage.getItem('cookie2')) {\n            redirectVar = <Redirect to=\"/TwitterHome\" />;\n        }\n\n        let profileImageData = <img className=\"img-style\" src=\"https://img.freepik.com/free-icon/user-filled-person-shape_318-74922.jpg?size=338c&ext=jpg\" alt=\"logo\" />\n        if (this.state.ProfileImagePreview) {\n            profileImageData = <img className=\"img-style\" src={this.state.ProfileImagePreview} alt=\"logo\" />\n        }\n\n        return (\n            <div>\n                {redirectVar}\n                <div>\n                   <div>\n                     <div className=\"jumbotron345\">\n\n                            {profileImageData}\n\n                            <div className=\"jumbo2\">\n                                <div className=\"para34\">\n                                    <br />\n                                   <br/>\n                                    <div className=\"in\">\n                                        <p className=\"para2\">{this.state.userdetails.profilename}</p>\n                                        <button onClick={this.profileedit} className=\"para6\">Edit Profile</button>\n                                    </div><br /><br />\n                                    <p className=\"para3\">{this.state.userdetails.userhandle}</p><br /><br /><br />\n                                    <div className=\"in\">\n                                        <p className=\"parafirstlastname2\"><b>First Name</b>  {this.state.userdetails.firstname} </p>\n                                        <p className=\"parafirstlastname6\"><b>Last Name</b>   {this.state.userdetails.lastname}</p>\n                                    </div><br />\n                                    <p className=\"parafirstlastname2\"><b>Born </b>           {this.state.dateofbirth}</p><br />\n                                    <p className=\"parafirstlastname2\"><b>Joined </b>         {this.state.created_at}</p><br />\n\n                                    <p className=\"parafirstlastname2\">{this.state.Followers} <b>Followers</b></p><br />\n                                    <p className=\"parafirstlastname2\">{this.state.Following} <b>Following</b></p><br />\n\n                                    <p className=\"parafirstlastname2\"> <b>City</b>           {this.state.userdetails.city}</p><br />\n                                    <p className=\"parafirstlastname2\"><b>State</b>           {this.state.userdetails.state} </p><br />\n                                    <p className=\"parafirstlastname2\"><b>Zipcode</b>         {this.state.userdetails.zipcode} </p><br />\n\n                                </div>\n                            </div>\n                            <div>\n                                <Modal className=\"setModal\" show={this.state.show} onHide={this.handleClose} >\n                                <Modal.Header className=\"item2\">\n                                       <Modal.Title >Edit Profile</Modal.Title>\n\n                                 </Modal.Header>\n\n                                    <Modal.Body >\n                                     <h4>User Name</h4>\n                                        <input className=\"name1\" name=\"username\" type=\"text\" defaultValue={this.state.userdetails.username} onChange={this.handleChange}></input>\n                                        <h4>Profile Image</h4>\n                                        <input className=\"name1\" name=\"ProfileImage\" onChange={this.handleChange} type=\"file\" />\n                                        <h4>Bio</h4>\n                                        <input className=\"name34567\" type=\"text\" defaultValue={this.state.userdetails.description}  onChange={this.handleChange} />\n                                        <h4>Website</h4>\n                                        <input className=\"name1\" name=\"Website\" defaultValue={this.state.userdetails.website_url} onChange={this.handleChange} type=\"text\"></input>\n                                        <h4>Birth date</h4>\n                                        <input className=\"name1\" name=\"dateofbirth\" defaultValue={this.state.dateofbirth} onChange={this.handleChange} type=\"text\"></input>\n                                        <h4>City</h4>\n                                        <input className=\"name1\" name=\"city\" defaultValue={this.state.userdetails.city} onChange={this.handleChange} type=\"text\"></input>\n                                        <h4>State</h4>\n                                        <input className=\"name1\" name=\"state\" defaultValue={this.state.userdetails.state} onChange={this.handleChange} type=\"text\"></input>\n                                        <div className=\"field1234567\" style={{ color: \"red\" }}>{this.state.IncorrectCredentials}</div>\n                                        <h4>Zipcode</h4>\n                                        <input className=\"name1\" name=\"zipcode\" defaultValue={this.state.userdetails.zipcode} onChange={this.handleChange} type=\"text\"></input>\n\n                                    </Modal.Body>\n                                    <Modal.Footer>\n                                        <Button variant=\"secondary\" onClick={this.handleClose}>\n                                            Close\n                                        </Button>\n                                        <Button variant=\"primary\" onClick={this.updatesProfile}>\n                                            Save Changes\n                                        </Button>\n                                    </Modal.Footer>\n                                </Modal>\n                            </div>\n                        </div>\n\n                    </div>\n                   \n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        profiledetails: state.profile.profiledetails,\n        imagePreviewresponse: state.image.imagePreviewresponse,\n        imageupload_url: state.image.imageupload_url\n\n    };\n}\nexport default connect(\n    mapStateToProps,\n    { profileaction, updateProfile, imageDownload, imageUpload }\n)(Profile);"]},"metadata":{},"sourceType":"module"}